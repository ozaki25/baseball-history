# 観戦履歴アプリ - プロジェクト要件定義書

> **プロジェクト名**: 観戦履歴  
> **作成日**: 2025年9月22日  
> **ステータス**: データソース検証完了 ✅ / 開発実装中 🚧

---

## 📋 1. プロジェクト概要

### アプリケーション名
**観戦履歴** (プロジェクト名: baseball-history)

### 目的・解決したい課題
北海道日本ハムファイターズの観戦履歴を個人で管理し、今年の観戦成績（勝敗）や過去の観戦記録を簡単に確認できるWebアプリケーションを開発する。

### 主要なターゲットユーザー
- 個人利用（開発者本人）
- ファイターズファンで観戦記録を管理したい方

### プロジェクトの期間
- 予定期間：数日
- 現在のステータス：要件確定完了、実装開始予定

---

## ⚡ 2. 機能要件

### 必須機能（MVP）

#### 観戦履歴一覧表示
- **ページタイトル**: 「観戦履歴」（ページ上の表示なし）
- **表示項目**
  - 観戦日（YYYY年MM月DD日 形式）
  - 対戦相手（例: vs 埼玉西武）  
  - 試合結果（勝利/敗戦）
  - スコア（例: 5-3）
  - 試合会場（例: エスコンフィールド）
- **表示形式**: テーブル形式
- **レスポンシブ対応**: スマートフォンでは重要項目（日付・相手・結果）のみ表示
- **表示順序**: 最新の観戦日が上（降順）
- **年での絞り込み**: プルダウンで年を選択して絞り込み可能

#### 公式サイト連携
- **試合詳細リンク**: 各試合から日本ハム公式サイトの試合結果ページへ直接リンク
- **URL形式**: `https://www.fighters.co.jp/gamelive/result/YYYYMMDD01/`
- **データソース**: 日本ハム公式サイトから試合情報を自動取得 ✅**検証完了**

#### データ管理システム
- **観戦日管理**: `dates.json` ファイルで手動管理（年単位構造化）
  ```json
  {
    "2024": ["0405", "0412", "0503"],
    "2023": ["0915", "1022"]
  }
  ```
  - 形式：MMDD（スマートフォン入力に最適化）
  - 年は構造で表現、日付は月日のみ
- **自動データ取得**: 観戦日を入力に対戦相手と勝敗を公式サイトから取得
  - **相手チーム名**: 短縮形で表示（例：「西武」「ロッテ」「楽天」「オリックス」など）
  - **エラーハンドリング**: データ取得失敗時はビルドを異常終了（デプロイしない）
- **更新フロー**: 
  1. GitHub上でdates.jsonを編集
  2. commit & push
  3. Vercelで自動ビルド・デプロイ

### 対象外機能
- ユーザー認証・管理機能
- データベース連携
- 複数ユーザー対応
- 手動データ入力機能

---

## 🔧 3. 技術要件

### アーキテクチャ
- **プラットフォーム**: Webアプリケーション
- **生成方式**: SSG (Static Site Generation) のみ
- **レンダリング**: すべて静的HTML生成、ユーザーアクションなし

### 対応環境
- **デバイス**: PC/スマートフォン対応
- **ブラウザ**: モダンブラウザ全般

### パフォーマンス要件
- 静的ページのみで高速表示
- CDN配信による世界各地からの高速アクセス
- ビルド時の事前生成により実行時の負荷なし

### セキュリティ
- 認証機能なし（個人利用想定）
- 静的ファイル配信のみ
- サーバーサイド処理なし

### 更新・デプロイフロー
1. GitHub Web UI または ローカルで `dates.json` 編集
2. Git commit & push
3. Vercelで自動ビルド・デプロイ
4. 静的サイト更新完了

---

## 🛠️ 4. 技術スタック

### フロントエンド
- **フレームワーク**: Next.js 15 (App Router) - 最新版
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS
- **生成方式**: SSG (Static Site Generation)
- **PWA**: デスクトップインストール対応（Web App Manifest + Service Worker）
- **選定理由**: 開発経験豊富、SSG機能充実、小規模アプリに最適

### データ取得
- **データソース**: 北海道日本ハムファイターズ公式サイト
  - スコアボードAPI: `https://www.fighters.co.jp/gamelive/result/YYYYMMDD01/`
  - **✅ アクセス確認済み**: curlでのデータ取得成功確認
- **スクレイピング**: ビルド時にHTMLパースして試合情報取得

### インフラ・デプロイ
- **ホスティング**: Vercel
- **CI/CD**: GitHub連携による自動デプロイ
- **CDN**: Vercel Edge Network

### その他
- **設定ファイル**: ESLint, PostCSS
- **PWA設定**: Web App Manifest, Service Worker
- **依存関係**: 最小限に抑制（軽量化優先）

---

## 🎨 5. UI/UX要件

### デザイン方針
- **スタイル**: シンプル・ミニマル
- **レスポンシブ**: PC・スマートフォン対応必須
- **アクセシビリティ**: 完全遵守（WCAG 2.1 AA準拠）
  - キーボードナビゲーション完全対応
  - スクリーンリーダー対応
  - 適切なコントラスト比確保
  - セマンティックHTML使用
- **PWA対応**: デスクトップインストール機能

### カラーテーマ
- **メインカラー**: ファイターズの公式ブランドカラー
  - ファイターズブルー（北海道の空と海をイメージした青）
  - ゴールド
  - 黒
  - 白（北海道の雪をイメージ）
- **追加色**: 実用性を考慮した一般的な色（グレー系、勝敗表示用の緑/赤）

### レイアウト構成
1. **ヘッダー**: アプリタイトル「観戦履歴」
2. **フィルター**: 年選択プルダウン
3. **メインコンテンツ**: 観戦履歴テーブル
4. **フッター**: シンプルなクレジット表示

---

## 📊 6. 開発実装計画

### 開発フェーズ
1. **✅ Phase 0**: 要件定義・データソース検証完了
2. **🚧 Phase 1**: Next.jsプロジェクト初期セットアップ
3. **Phase 2**: データ取得・管理システム実装
4. **Phase 3**: UI/UXデザイン・レスポンシブ対応
5. **Phase 4**: Vercelデプロイ・自動化設定

### プロジェクト構成予定
```
/
├── README.md
├── PROJECT_REQUIREMENTS.md
├── public/
│   ├── manifest.json          # PWA マニフェスト
│   ├── icon-192x192.png       # PWA アイコン
│   ├── icon-512x512.png       # PWA アイコン
│   └── favicon.ico           # ファビコン
├── data/
│   └── dates.json              # 観戦日データ（年単位構造化）
├── src/
│   ├── app/
│   │   ├── layout.tsx         # レイアウトコンポーネント
│   │   ├── page.tsx           # メインページ
│   │   └── globals.css        # Tailwind CSS設定
│   ├── components/
│   │   ├── GameHistory.tsx    # 観戦履歴一覧コンポーネント
│   │   └── YearFilter.tsx     # 年選択フィルター
│   ├── lib/
│   │   └── gameDataFetcher.ts # 試合データ取得・処理
│   └── types/
│       └── game.ts            # TypeScript型定義
├── next.config.js
├── tailwind.config.js
└── package.json
```

### データ構造確定
```json
{
  "2024": ["0405", "0412", "0503"],
  "2023": ["0915", "1022"]
}
```
- **形式**: 年単位構造化 + MMDD形式
- **最適化**: スマートフォン入力に配慮
- **処理**: ビルド時に`YYYY-MM-DD`に復元してAPI取得

### 現在のステータス
- **✅ Phase 0**: 要件定義・データソース検証完了
- **✅ 設計決定**: JSON形式（年単位+MMDD）・Tailwind CSS確定  
- **� Phase 1**: Next.jsプロジェクト初期セットアップ（準備完了）
- **Phase 2**: データ取得・管理システム実装
- **Phase 3**: UI/UXデザイン・レスポンシブ対応
- **Phase 4**: Vercelデプロイ・自動化設定

---

## � 7. データソース検証結果

### 日本ハム公式サイト連携
- **ベースURL**: `https://www.fighters.co.jp/gamelive/result/YYYYMMDD01/`
- **アクセス検証**: ✅ curlコマンドでデータ取得成功確認済み
- **取得可能データ**:
  - 試合日程・結果
  - 対戦相手情報  
  - 試合スコア（勝敗）
  - 試合詳細（球場、審判、観客数など）
  - 選手情報（スターティングメンバー、バッテリーなど）

### サンプルURL検証結果
```bash
# 検証コマンド例
curl https://www.fighters.co.jp/gamelive/live/2021041301/

# ✅ 結果: HTMLデータ正常取得確認
# - スコアボード情報含有
# - 試合状態（試合終了/進行中/試合前）取得可能  
# - 詳細な試合データ解析可能
```

---

## ✅ 8. 決定事項まとめ

### 確定した技術仕様
- **フレームワーク**: Next.js 15 (App Router)
- **言語**: TypeScript  
- **スタイリング**: Tailwind CSS
- **データ形式**: 年単位構造化JSON（MMDD形式）
- **デプロイ**: Vercel + GitHub連携
- **データソース**: 日本ハム公式サイト（✅検証済み）

### JSONデータ例
```json
{
  "2024": ["0405", "0412", "0503"],
  "2023": ["0915", "1022"]
}
```

### 次のアクション
1. **Next.jsプロジェクト初期化**（package.json、設定ファイル作成）
2. **基本的なフォルダ構成作成**
3. **TypeScript・Tailwind CSS環境構築**

---

**開発準備完了** 🚀 - 実装開始可能な状態です。